<!-- this will include more once we update the users tables -->
<div>
<div>Name : <%= @user.name %></div>
<div>Email : <%= @user.email %></div>
<div>Current Bank Value : <%= @user.bank_value %></div>
<div>Ten hours shift : <%= @user.ten_hour_shift %></div>
<div>Team : <%= @user.team %></div>
<div>Work Days : <%= @user.work_days %></div>
<div>Start Time : <%= @user.start_time %></div>
<div>End Time : <%= @user.end_time %></div>
<div>Position : <%= @user.position %></div>
<div>Admin : <%= @user.admin %></div>

<div>
<h1>Requests for today</h1>
<% @user.pto_requests.each do |request| %>
    <% if request.request_date == Date.today %>
    <div>
    <%= request.reason %> <%= request.request_date %> <%= request.cost %> <%= request.excused %> <%= request.admin_note %> <% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %> <% end %>
    </div>
    <% end %>
<% end %>
</div>

<h1>Past requests</h1>
<% @user.pto_requests.each do |request| %>
    <% if request.request_date < Date.today %>
    <div>
    <%= request.reason %> <%= request.request_date %> <%= request.cost %> <%= request.excused %> <%= request.admin_note %> <% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %> <% end %>
    </div>
    <% end %>
<% end %>
</div>

<div>
<h1>Upcoming requests</h1>
<% @user.pto_requests.each do |request| %>
    <% if request.request_date > Date.today %>
    <div>
    <%= request.reason %> <%= request.request_date %> <%= request.cost %> <%= request.excused %> <%= request.admin_note %> <% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %> <% end %>
    </div>
    <% end %>
<% end %>
</div>
<button class="add-resquest-btn" id="add-request-btn">Add Request</button>
<%= button_to "Update Admin Privileges", user_update_admin_path(@user) %>
<div>
<%= button_to "Send user Password reset", user_send_password_reset_path(@user) %>
</div>

<div class="modal"  id="add-request" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div><!-- modal-header -->
            <div class="modal-body">
            <%= bootstrap_form_for(PtoRequest.new) do |f| %>
                <%= f.hidden_field :user_id, :value => @user.id %>
                <%= f.text_field :reason, 
                    maxlength: 1000, 
                    placeholder: 'reason',
                    class: 'form-control', 
                    required: 'true' %>
                  <%= f.date_field :request_date %>
                  <%= f.number_field :cost %>
                  <%= f.submit 'create request', class: 'form-control' %>
              <% end %>
            </div> <!-- modal-body -->
        </div> <!-- modal-conent -->
    </div> <!-- modal-dialog -->
</div> <!-- add-request -->

<div class="update-shift">
<p>Youre shift is currently set to show cost for a <% if current_user.ten_hour_shift %> ten hour shift <% else %> eight hour shift <% end %> to change this, toggle it with the button bellow </p>
<%= form_tag user_update_shift_path(current_user), method: :put do %>
  <%= submit_tag '8/10 hour shift' %>
<% end %>
</div>

<script>
  $('body').on('click', '#add-request-btn', async function () {
    $('#add-request').modal('show')
  })
</script>