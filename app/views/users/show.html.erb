<!-- this will include more once we update the users tables -->
<div>Name : <%= @user.name %></div>
<div>Email : <%= @user.email %></div>
<div>Current Bank Value : <%= @user.bank_value %></div>
<div>Ten hours shift : <%= @user.ten_hour_shift %></div>
<div>Team : <%= @user.team %></div>
<div>Work Days : <%= @user.work_days %></div>
<div>Start Time : <%= @user.start_time %></div>
<div>End Time : <%= @user.end_time %></div>
<div>Position : <%= @user.position %></div>
<div>Admin : <%= @user.admin %></div>

<div>
<h1>Requests for today</h1>
<% @user.pto_requests.each do |request| %>
    <% if request.request_date == Date.today %>
    <div>
    <%= request.reason %> <%= request.request_date %> <%= request.cost %> <%= request.excused %> <%= request.admin_note %> <% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %> <% end %>
    </div>
    <% end %>
<% end %>
</div>

<h1>Past requests</h1>
<% @user.pto_requests.each do |request| %>
    <% if request.request_date < Date.today %>
    <div>
    <%= request.reason %> <%= request.request_date %> <%= request.cost %> <%= request.excused %> <%= request.admin_note %> <% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %> <% end %>
    </div>
    <% end %>
<% end %>
</div>

<div>
<h1>Upcoming requests</h1>
<% @user.pto_requests.each do |request| %>
    <% if request.request_date > Date.today %>
    <div>
    <%= request.reason %> <%= request.request_date %> <%= request.cost %> <%= request.excused %> <%= request.admin_note %> <% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %> <% end %>
    </div>
    <% end %>
<% end %>
</div>
<button class="adminbutton" id="add-request-btn">Add Request</button>
<%= button_to "Update Admin Privileges", user_update_admin_path(@user) %>
<div>
<%= button_to "Send user Password reset", user_send_password_reset_path(@user) %>
</div>


<div class="admin-modal" id="add-request">
  <div class="add-request-modal">
    <div class="modal-header">Add Request for <%= @user.name %> 
      <div class="close2">&times;</div>
    </div> <!-- modal-header -->
      <%= bootstrap_form_for(PtoRequest.new) do |f| %>
        <%= f.hidden_field :user_id, :value => @user.id %>
        <%= f.text_field :reason, 
            maxlength: 1000, 
            placeholder: 'reason',
            class: 'form-control', 
            required: 'true' %>
          <%= f.date_field :request_date %>
          <%= f.number_field :cost %>
          <%= f.submit 'create request', class: 'form-control' %>
      <% end %>
  </div> <!-- add-request-modal -->
</div> <!-- add-request --> 

<script>
var modal = document.getElementById('add-request');
var btn = document.getElementById("add-request-btn");
var span = document.getElementsByClassName("close")[0];
btn.onclick = function() {
  modal.style.display = "block";
}
span.onclick = function() {
  modal.style.display = "none";
}
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
  else if (event.target == modal2) {
    modal2.style.display = "none";
  }
}
</script>
