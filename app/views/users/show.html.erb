<div class="layout-edit-user">
  <div class="left-edit-user">
        <button class="edit-user-buttons" id="add-request-btn">Add Request</button>
        <div>
        <%= link_to "User PTO Requests", export_user_request_path(:id => @user, :format => :csv , :method => :get), {class:"edit-user-links"} %>
        </div>
        <% if current_user.admin? %>
        <%= button_to "Toggle Admin", user_update_admin_path(@user), {class:"edit-user-buttons"} %>
        <% end %>
        <div>
            <%= button_to "Password Reset", user_send_password_reset_path(@user), {class:"edit-user-buttons"} %>
        </div>

        <div>
            <%= button_to "8/10 hour shift", user_update_shift_path(@user), method: :put %>
        </div>
        <button class="edit-user-buttons" id="Back" onclick="history.back(-1)">Go Back</button>
  </div>

    <div class="right-edit-user users-right">
        <div class="content-top">
            <h2>Agent Profile</h2>
            <table class="profile-container">
                <tr><td>Name:</td><td><%= @user.name %></td><td>Email:</td><td><%= @user.email %></td></tr>
                <tr><td>Position:</td><td><%= @user.position %></td><td>Team:</td><td><%= @user.team %></td></tr>
                <tr><td>Current Bank Value:</td><td><%= @user.bank_value %></td><td>Admin:</td><td><%= @user.admin %></td></tr>
                <tr><td>Shift:</td><td><%= @shift_start %> â€“ <%= @shift_end %></td><td>Shift Length:</td><td><% if @user.ten_hour_shift %> 10 hour shift <% else %> 8 hour shift <% end %></td></tr>
                <tr><td>Work Days:</td><td><%= @workdays.chop.chop %></td></tr>
            </table>
        </div>
        <div class="content-bottom">
            <div class="upcoming-requests-tab">
                    <h2>Requests for Today</h2>
                    <table class="requests">
                        <% @user.pto_requests.each do |request| %>
                        <% if request.request_date == Date.today %>
                        <tr>
                        <td><b>Date:</b> <%= request.request_date %></td>
                        <td><b>Value:</b> <%= request.cost %></td>
                        <td><b>Reason:</b> <%= request.reason %></td>
                        <td><b>Excused:</b> <%= request.excused %> <%= request.admin_note %></td>
                        <td><% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %></td>
                        <% end %>
                        </tr>
                        <% end %>
                    <% end %>
                    </table>
            </div>
            <div class="upcoming-requests-tab">
                    <h2>Upcoming Requests</h2>
                    <table class="requests">
                        <% @user.pto_requests.each do |request| %>
                        <% if request.request_date > Date.today %>
                        <tr>
                        <td><b>Date:</b> <%= request.request_date %></td>
                        <td><b>Value:</b> <%= request.cost %></td>
                        <td><b>Reason:</b> <%= request.reason %></td>
                        <td><b>Excused:</b> <%= request.excused %> <%= request.admin_note %></td>
                        <td><% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %></td>
                        <% end %>
                        </tr>
                        <% end %>
                    <% end %>
                    </table>
            </div> 
            <div class="past-requests-tab">
                    <h2>Past Requests</h2>
                    <table class="requests">
                        <% @user.pto_requests.each do |request| %>
                        <% if request.request_date < Date.today %>
                        <tr>
                        <td><b>Date:</b> <%= request.request_date %></td>
                        <td><b>Value:</b> <%= request.cost %></td>
                        <td><b>Reason:</b> <%= request.reason %></td>
                        <td><b>Excused:</b> <%= request.excused %> <%= request.admin_note %></td>
                        <td><% if request.excused == false %><%= button_to "Excuse Request", excuse_pto_request_path(request) %></td>
                        <% end %>
                        </tr>
                        <% end %>
                        <% end %>
                    </table>
            </div>
        </div>
    </div>
    
    <div class="modal"  id="add-request" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div><!-- modal-header -->
                    <div class="modal-body">
                    <%= bootstrap_form_for(PtoRequest.new) do |f| %>
                        <%= f.hidden_field :user_id, :value => @user.id %>
                        <%= f.text_field :reason, 
                            maxlength: 1000, 
                            placeholder: 'reason',
                            class: 'form-control', 
                            required: 'true' %>
                        <%= f.date_field :request_date %>
                        <%= f.number_field :cost %>
                        <%= f.submit 'create request', class: 'form-control' %>
                    <% end %>
                    </div> <!-- modal-body -->
            </div> <!-- modal-conent -->
        </div> <!-- modal-dialog -->
    </div> <!-- add-request -->

</div>
